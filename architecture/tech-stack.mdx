---
title: "Tech Stack"
description: "Detailed technical stack specification and architecture decisions"
---

# Private Markets Marketplace
## Tech Stack Specification (v1.0)

## 1. Architectural Principles
This platform is built with the following non-negotiable principles:
- B2B, compliance-first architecture
- Clear separation of concerns (UI, API, data, governance)
- Auditability over speed
- Explicit workflows over implicit state
- Future-ready for agent integration

## 2. High-Level Architecture

```
[ Next.js Web App ]
        |
        |  HTTPS (REST / JSON)
        v
[ Node.js Backend (API Layer) ]
        |
        |  SQL + Row Level Security
        v
[ Supabase Postgres ]
```

Supabase is used only as:
- Managed Postgres
- Auth (with strict control)
- Storage (documents)

**All business logic lives in Node.js, not in the frontend.**

## 3. Frontend Stack (Web UI)

### 3.1 Framework
**Next.js (App Router)**
- Version: Latest stable (14+)

**Why:**
- Server Components for data-heavy views
- Strong routing for complex workflows
- Enterprise-grade SEO and performance

### 3.2 UI & Styling
- **Tailwind CSS**
- **ShadCN UI** (heavily customized)

**Rules:**
- Use ShadCN primitives only
- No third-party UI kits beyond this
- Design tokens mapped from the design system

### 3.3 State Management
- **React Query (TanStack Query)** for server state
- Local component state for UI-only logic
- **No Redux.**

### 3.4 Forms
- **React Hook Form**
- **Zod** for schema validation
- Same Zod schemas reused in backend where possible.

### 3.5 Authentication (Frontend)
- **Supabase Auth** (email + password initially)
- JWT passed to backend API
- No direct DB access from frontend beyond auth

## 4. Backend Stack (API Layer)

### 4.1 Runtime & Framework
- **Node.js (LTS)**
- **Fastify** (preferred) or **Express** (acceptable)

**Why Fastify:**
- Better performance
- Schema-first mindset
- Cleaner plugin system

### 4.2 API Style
- RESTful APIs
- Versioned (`/api/v1`)
- Explicit endpoints for workflows
- **No GraphQL in v1.**

### 4.3 Validation & Types
- **Zod** for request/response validation
- Shared schema package between frontend and backend

### 4.4 Authorization
- **Role-Based Access Control (RBAC)**
- Enforced only on backend
- Middleware-driven

**Roles:**
- `ADMIN`
- `COMPLIANCE`
- `IFA`
- `DEAL_ORIGINATOR`

### 4.5 Business Logic Ownership
**Backend exclusively owns:**
- Approval workflows
- State transitions
- Quantity deductions
- Audit logging
- Notifications

**Frontend is a pure consumer.**

## 5. Database Stack

### 5.1 Database
**Supabase Postgres**

**Usage:**
- Primary transactional datastore
- Strong relational modeling
- Row Level Security (RLS) enabled

### 5.2 Schema Management
- SQL migrations (Supabase migrations or Prisma)
- No auto-sync from ORM in prod

### 5.3 Access Patterns
- Backend uses service role key
- Frontend never accesses business tables directly
- RLS for additional protection, not primary security

### 5.4 Indexing Strategy (Baseline)
**Indexes required on:**
- `user_id`
- `private_security_id`
- `tranche_id`
- `status`
- `created_at`

**Composite indexes for:**
- `(status, created_at)`
- `(ifa_user_id, created_at)`

## 6. Authentication & Identity

### 6.1 Auth Provider
**Supabase Auth**

### 6.2 Identity Rules
- One Supabase user = one platform user
- Role stored in application users table
- Admin users pre-seeded

## 7. File & Document Storage

### 7.1 Storage
**Supabase Storage** (private buckets)

### 7.2 Document Types
- Term Sheets
- Financial Statements
- Business Plans
- KYC Documents

### 7.3 Access Rules
- Signed URLs only
- Time-limited access
- No public buckets

## 8. Notifications

### 8.1 Phase 1
- In-app notifications
- Stored in notifications table

### 8.2 Phase 2 (Planned)
- Email
- WhatsApp
- Webhooks for institutions

## 9. Audit & Compliance

### 9.1 Audit Logging
- Every state change logged
- Immutable records
- Stored in `audit_logs` table

### 9.2 Approval System
- Generic approval table
- Entity-agnostic
- Human-in-the-loop enforced

## 10. Deployment & Environments

### 10.1 Environments
- Development
- Staging
- Production

**Each with:**
- Separate Supabase project
- Separate storage buckets

### 10.2 Hosting
- **Frontend:** Vercel
- **Backend:** Node server (Railway / Render / AWS ECS)

## 11. Security Baselines
- HTTPS everywhere
- Environment variables only for secrets
- No credentials in frontend
- Rate limiting on APIs
- Strict CORS

## 12. Observability (Minimum)
- Structured logs (JSON)
- Request IDs
- Error tracking (Sentry or equivalent)

## 13. Phase 2 Readiness (Agents)
This stack supports:
- Background workers
- Agent-driven approvals
- Async review pipelines

**Future additions:**
- Message queue (BullMQ / SQS)
- Agent execution service

## 14. Explicitly Out of Scope (v1)
- Blockchain settlement
- Real-time pricing feeds
- Client login access
- Automated compliance decisions
- Payment rails

## 15. Summary
This stack is:
- Boring
- Predictable
- Audit-safe
- Enterprise-demo ready

It minimizes architectural risk while leaving clear extension points for:
- Automation
- Agents
- Institutional scale


---
title: "API Overview"
description: "Complete overview of all API endpoints, routes, and functionality"
---

# API Overview

## What We've Built

### Backend API (Fastify)

**Base URL:** `http://localhost:4001/api/v1`

**OpenAPI Documentation:** `http://localhost:4001/docs` (Swagger UI)

#### Routes Implemented:

1. **Authentication** (`/api/v1/auth`)
   - `POST /signup` - User registration
   - `POST /signin` - User login
   - `POST /kyc` - Submit KYC data (authenticated)

2. **Users** (`/api/v1/users`)
   - `GET /me` - Get current user profile (authenticated)
   - `GET /` - List all users (Admin only)

3. **Securities** (`/api/v1/securities`)
   - `GET /` - List live securities (marketplace)
   - `GET /:id` - Get security details with tranches
   - `POST /` - Create new security (Deal Originator only)

4. **Orders** (`/api/v1/orders`)
   - `GET /` - List orders (role-based: IFA sees own, Deal Originator sees their securities)
   - `POST /` - Create order (IFA only)

5. **RFQs** (`/api/v1/rfqs`)
   - `GET /` - List RFQs (role-based)
   - `POST /` - Create RFQ (IFA only)

6. **Clients** (`/api/v1/clients`)
   - `GET /` - List clients (IFA only)
   - `POST /` - Create client (IFA only)

7. **Compliance** (`/api/v1/compliance`)
   - `GET /approvals` - List pending approvals (Compliance only)
   - `POST /approvals/:id/:action` - Approve/Reject (Compliance only)

8. **Notifications** (`/api/v1/notifications`)
   - `GET /` - List user notifications (authenticated)
   - `PATCH /:id/read` - Mark notification as read

9. **Health Check**
   - `GET /health` - Server and database health status

### Frontend (Next.js)

**Base URL:** `http://localhost:4000`

#### Pages Implemented:

1. **Home** (`/`)
   - Landing page

2. **Authentication**
   - `/auth/signin` - Sign in page
   - `/auth/signup` - Sign up page

3. **Marketplace** (`/marketplace`)
   - Securities listing table
   - Shows: Security name, latest price, available quantity, active tranches

#### Components Built:

1. **Layout Components**
   - `MainLayout` - Main app layout with sidebar
   - `Sidebar` - Left navigation sidebar

2. **UI Components** (Design System)
   - `Button` - Primary, secondary, tertiary variants
   - `Table` - Full table component with header, body, rows, cells
   - `Input` - Text input with design system styling
   - `Label` - Form labels
   - `Card` - Card container with header, title, content

3. **Utilities**
   - `api-client` - API client with authentication
   - `utils` - Utility functions (cn for className merging)

### Database Schema

**12 Tables Created:**
1. `users` - User accounts with roles and KYC
2. `clients` - IFA client profiles
3. `client_brokers` - Client broker mappings
4. `private_securities` - Security listings
5. `tranches` - Security tranches with pricing
6. `orders` - Order transactions
7. `rfqs` - Request for Quote submissions
8. `approvals` - Compliance approval workflow
9. `notifications` - In-app notifications
10. `audit_logs` - Audit trail
11. `documents` - Document references
12. All indexes, triggers, and RLS enabled

### Shared Package

**Zod Schemas:**
- User schemas (signup, KYC, user)
- Security schemas
- Tranche schemas
- Order schemas
- RFQ schemas
- Client schemas
- Approval schemas

**TypeScript Types:**
- UserRole enum
- UserStatus enum
- SecurityStatus enum
- TrancheStatus enum
- OrderStatus enum
- RFQStatus enum
- ApprovalStatus enum
- ApprovalEntityType enum

## Accessing API Documentation

Once the backend is running, visit:
- **Swagger UI:** http://localhost:4001/docs
- **OpenAPI JSON:** http://localhost:4001/docs/json

## Next Steps to Build

### High Priority:
- [ ] Security detail page with tranches, price history, documents
- [ ] Order management UI (list, create, view details)
- [ ] RFQ management UI
- [ ] Client management UI (create, list, edit)
- [ ] Compliance dashboard (approval queue)
- [ ] User profile/KYC submission page
- [ ] Notifications UI

### Medium Priority:
- [ ] Tranche creation/management (Deal Originator)
- [ ] Order acceptance/rejection (Deal Originator)
- [ ] RFQ response workflow
- [ ] Document upload functionality
- [ ] Price history charts

### Low Priority:
- [ ] Admin user management
- [ ] Audit log viewer
- [ ] Advanced search/filtering
- [ ] Export functionality

